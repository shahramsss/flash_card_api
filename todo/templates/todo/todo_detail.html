{% extends 'base.html' %}
{% load jalali_filters %}
{% load static %}

{% block content %}
<div class="container py-4" dir="rtl">

  <!-- Ø¹Ù†ÙˆØ§Ù† -->
  <div class="mb-4">
    <h3 class="fw-bold text-primary">âœï¸ ÙˆÛŒØ±Ø§ÛŒØ´ ÙˆØ¸ÛŒÙÙ‡</h3>
  </div>

  <!-- ÙØ±Ù… ÙˆÛŒØ±Ø§ÛŒØ´ -->
  <div class="card shadow-sm mb-5">
    <div class="card-body">
      <form method="post">
        {% csrf_token %}
        {{ form.non_field_errors }}

        <div class="mb-3">
          <label for="id_title" class="form-label fw-bold">Ø¹Ù†ÙˆØ§Ù†</label>
          {{ form.title }}
        </div>

        <div class="mb-3">
          <label for="id_description" class="form-label fw-bold">ØªÙˆØ¶ÛŒØ­Ø§Øª</label>
          {{ form.description }}
        </div>

        <div class="row mb-3">
          <div class="col-md-6">
            <label for="id_due_date" class="form-label fw-bold">ØªØ§Ø±ÛŒØ® Ø³Ø±Ø±Ø³ÛŒØ¯</label>
            {{ form.due_date }}
          </div>
          <div class="col-md-6">
            <label for="id_due_time" class="form-label fw-bold">Ø²Ù…Ø§Ù† Ø³Ø±Ø±Ø³ÛŒØ¯</label>
            {{ form.due_time }}
          </div>
        </div>

        <div class="mb-3">
          <label for="id_priority" class="form-label fw-bold">Ø§ÙˆÙ„ÙˆÛŒØª</label>
          {{ form.priority }}
        </div>

        <div class="form-check form-switch mb-4">
          {{ form.is_completed }}
          <label class="form-check-label fw-bold" for="id_is_completed">
            Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡
          </label>
        </div>

        <div class="d-flex gap-2">
          <button type="submit" class="btn btn-primary px-4">
            ğŸ’¾ Ø°Ø®ÛŒØ±Ù‡ ØªØºÛŒÛŒØ±Ø§Øª
          </button>
          <a href="{% url 'todo:todo_list' %}" class="btn btn-outline-secondary">
            â†© Ø¨Ø§Ø²Ú¯Ø´Øª
          </a>
        </div>
      </form>
    </div>
  </div>

  <!-- Ø¬Ø²Ø¦ÛŒØ§Øª ÙˆØ¸ÛŒÙÙ‡ -->
  <div class="card shadow-sm">
    <div class="card-header bg-light fw-bold">
      ğŸ“Œ Ø¬Ø²Ø¦ÛŒØ§Øª ÙˆØ¸ÛŒÙÙ‡
    </div>

    <div class="card-body">
      <h4 class="text-primary mb-3">
        {{ todo.title }}
      </h4>

      {% if todo.description %}
        <p class="text-muted">
          {{ todo.description }}
        </p>
      {% else %}
        <p class="text-muted fst-italic">
          ØªÙˆØ¶ÛŒØ­ÛŒ Ø«Ø¨Øª Ù†Ø´Ø¯Ù‡
        </p>
      {% endif %}

      <div class="mb-3">
        <strong>ÙˆØ¶Ø¹ÛŒØª:</strong>
        {% if todo.is_completed %}
          <span class="badge bg-success ms-2">Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯Ù‡ âœ…</span>
        {% else %}
          <span class="badge bg-warning text-dark ms-2">Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†Ø¬Ø§Ù… â³</span>
        {% endif %}
      </div>

      <ul class="list-group list-group-flush mb-3">
        <li class="list-group-item">
          <strong>ØªØ§Ø±ÛŒØ® Ø§ÛŒØ¬Ø§Ø¯:</strong>
          {{ todo.created_at|to_jalali }}
        </li>
        <li class="list-group-item">
          <strong>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:</strong>
          {{ todo.updated_at|to_jalali }}
        </li>
      </ul>
    </div>
  </div>

</div>
{% endblock %}
